---
title: "p8105_hw2_fl2715"
author: "Fengwei Lei"
output: github_document
---

## Load Necessary Library
```{r load_libraries}
library(tidyverse)
library(readxl)
```

## Problem 1

```{r}
nyc_df=
  read_csv(
    "./NYC_Transit_Subway_Entrance_And_Exit_Data.csv",
    na = c("NA", ".", "")) |> 
  janitor::clean_names() |> 
  select(
    line, station_name, station_latitude, station_longitude, 
    starts_with("route"), entry, exit_only, vending, entrance_type, 
    ada) |> 
  mutate(entry = ifelse(entry == "YES", TRUE, FALSE))
```

The above dataset contains information from `NYC_Transit_Subway_Entrance_And_Exit_Data.csv`. It includes variables such as subway line, station name, latitude, longitude, routes served, entry status, exit-only status, vending availability, entrance type, and ADA compliance. Data cleaning steps involved handling missing values, cleaning column names, selecting relevant variables, and converting the entry variable from “YES”/“NO” to a logical format (TRUE/FALSE). The resulting dataset has `r nrow(nyc_df)` rows and `r ncol(nyc_df)` columns.

But these data is not fully “tidy”: both the route number and route should be treated as variables. To make the dataset tidy, we need to reshape the route variables from wide to long format. This restructuring is helpful when analyzing specific routes.

The below code shows that the number of distinct stations identified both by name and line, where we use the `distinct()` fuction.

```{r}
nyc_df |> 
  select(station_name, line) |> 
  distinct()
```

The following code chunk illustrates the number of stations which are ADA compliant. Firstly, we filter the rows where `ada == TRUE`. And we do the similar steps to the above code chunk.

```{r}
nyc_df |> 
  filter(ada == TRUE) |> 
  select(station_name, line) |> 
  distinct()
```

The following code chunk shows the proportion of station entrances / exits without vending allow entrance. We firstly filter the rows where there is no vending. And since the variable `entry` is a logical variable, we could compute the mean for calculating proportion.

```{r}
nyc_df |> 
  filter(vending == "NO") |> 
  pull(entry) |> 
  mean()
```

